@page "/reservations"

@using TailwindBlazorElectron.Services
@using TailwindBlazorElectron.Model

@inject LibraryService LibraryService

@code
{
	List<Reservation> AllReservations;
	protected override void OnInitialized()
	{
		AllReservations = LibraryService.GetAllReservations();
		AllReservations = AllReservations.OrderBy(r=>r.IsAllowed).ThenByDescending(r => r.CreatedAt).ToList();

	}

}
<div class="fixed mt-10 ml-8 select-none">
	<p class="text-2xl font-medium">Reservations</p>
	<div class="flex flex-row flex-wrap py-3 mt-3 overflow-y-visible gap-x-5 gap-y-5 space-y" style="height:calc(100vh - 100%);">
		@foreach (Reservation reservation in AllReservations)
		{
			<div class="flex items-start max-w-lg p-5 pr-3 space-x-5 border border-gray-200 rounded-lg w-max max-h-sm">
				@* book info *@
				<div class="w-2/3 h-full space-y-3">
					<div class="relative flex w-full h-full space-x-5">
						<img src="@reservation.Edition.Book.CoverImage" class="object-fill w-2/5 rounded-lg ">
						<div>
							<p class="text-xl font-medium tracking-tight">@reservation.Edition.Book.Title</p>
							<p class="mt-1 tracking-tight text-md">@reservation.Edition.Book.Author.Name</p>
							<div class="">
								<p class="mt-1 tracking-tight text-md">ISBN: @reservation.Edition.ISBN13</p>
								<p class="mt-1 tracking-tight text-md">Publisher: @reservation.Edition.Publisher</p>
								<p class="mt-1 tracking-tight text-md">Year published: @reservation.Edition.YearPublished</p>
							</div>
						</div>
					</div>	
				</div>

				@* user info *@
				<div class="relative w-1/3 h-full text-right">
					<p class="text-xl tracking-tight">@reservation.User.FullName</p>
					<p class="mt-1 tracking-tight text-md">Created at:</p>
					<p class="tracking-tight text-md">@reservation.CreatedAt.ToString("dd.MM.yyyy.")</p>
					@if (@reservation.IsAllowed)
					{
						<p class="mt-2 tracking-tight text-md">Due date:</p>
						<p class="tracking-tight text-md">@reservation.DueDate.ToString("dd.MM.yyyy.")</p>	
						<div class="float-right px-2 py-2 mt-5 transition duration-150 ease-in-out w-min rounded-3xl">
							<p class="absolute bottom-0 right-0 font-light text-black whitespace-nowrap text-xxs">
								Allowed
							</p>
						</div>
					}
						
					else
					{
						<p class="tracking-tight mt-14 text-md"> @reservation.Edition.QuantityAvailable Available</p>
						<button class="absolute bottom-0 right-0 px-4 py-2 mt-1 transition duration-150 ease-in-out cursor-pointer w-min bg-palegreen hover:bg-opacity-90 rounded-3xl focus:outline-none">
							<p class="font-light text-white whitespace-nowrap text-xxs">
								Allow
							</p>
						</button>
					}
					
				</div>
				
			</div>
		}	
	</div>
</div>

